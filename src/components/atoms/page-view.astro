---
interface Props {
    slug: string;
}
---

<astro-slug data-slug={Astro.props.slug}></astro-slug>

<script is:inline>
    const updatePageView = async (slug) => {
        await fetch(`/api/get-data?pathname=${slug}`);
    };

    class AstroGreet extends HTMLElement {
        connectedCallback() {
            const slug = this.dataset.slug;
            if (slug) {
                updatePageView(slug);
            }
        }
    }

    customElements.define("astro-slug", AstroGreet);
</script>
