---
export const prerender = false;

import PageLayout from "@layouts/page-layout.astro";
import { actions, isActionError } from "astro:actions";

const result = Astro.getActionResult(actions.testAction);
const actionError = isActionError(result?.error) ? result.error.message : false;
const actionSuccess = result?.data?.success;
console.log({ actionError, actionSuccess, result });
---

<PageLayout hideFooter>
    <form
        method="POST"
        action={actions.testAction}
        class="flex w-2/3 flex-col gap-4"
        id="newsletter-form"
    >
        <input
            required
            type="email"
            name="email"
            autocomplete="email"
            class="text-font-color ring-accent focus:ring-accent block w-full min-w-72 rounded-md border-0 text-sm ring-1 ring-inset placeholder:text-zinc-400 focus:ring-2 focus:ring-inset dark:bg-zinc-800 dark:ring-zinc-700"
            placeholder="Join 300+ web developers"
        />
        <button
            class="bg-accent w-full cursor-pointer rounded px-3.5 py-2.5 text-sm font-medium text-zinc-600 shadow transition-shadow duration-150 hover:shadow-md"
            type="submit">Subscribe</button
        >
    </form>
    {actionSuccess && <p>Success!</p>}
    {actionSuccess}
    {actionError && <p>Error: {actionError}</p>}
</PageLayout>
